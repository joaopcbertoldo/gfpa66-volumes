# Glass fiber-reinforced polyamide 66 3D X-ray computed tomography (XCT) dataset for deep learning segmentation

# todos
 
 - updated zip files links
 - updated h5/xdmf files links
 - updated pymicro tutorial link
 - make the `read_h5` work
 - update description in zenodo
 - include link to this 
 - todo show how to do it with fiji --> add it to zenodo as well

Please cite us as: 

```
bibtex entry TO BE UPDATED
```

This repository is a complement to paper above. We show how to read the data mentioned in the paper and how to load the Keras models we trained to segement that data. Both the data and the models are publicly available on [Zenodo](https://zenodo.org/).

Links:

* **data**: [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.4601560.svg)](https://doi.org/10.5281/zenodo.4601560)
* **models**: [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.4587827.svg)](https://doi.org/10.5281/zenodo.4587827)

# data

We provide annotated XCT volumes (stack of 2D images) of two specimen of PolyAmide 66 (PA66) reinforced with glass fibers. 

There are specimen:

* **pa66** or **train-val-test**: for wich we provide the gray-level image, its manual segmentation (voxel-wise annotation volume) with 3 classes, and the segementation predicted by one our models on the *test* partition of the volume.
* **crack**: another speciment of the same material, segmented with the same model.

We show how to open data in three ways:

 - from `.raw` files in python

 - from `.raw` files using [Fiji (ImageJ)](https://imagej.net/Fiji)

 - from `.h5` files in python using [`pymicro`](https://github.com/heprom/pymicro)

## files 

| **.zip file**               | **.raw file**                | **Description**                                                                                                                     |
| :-------------------------: | :--------------------------: | :---------------------------------------------------------------------------------------------------------------------------------- |
| pa66\.zip                   | pa66\.raw                    | Data (gray level image stack) of the `Train-Val-Test` volume (1900 slices).                                                         |
|                             | pa66\.ground\_truth.raw      | Ground truth segmentation of the `Train-Val-Test` volume.                                                                           |
| pa66\_test.zip              | pa66\.test.prediction.raw    | Segmentation generated by the best 2D model on the *test* set (last 300 slices of the `Train-Val-Test` volume).                    |
|                             | pa66\.test.error\_volume.raw | Disagreement between the ground truth and the model's prediction on the *test* set: 1 means *incorrect*, 0 means *correct*    |
| crack.zip                   | crack.raw                    | Data of the non-annotated volume containing a crack inside.                                                                         |
|                             | crack.prediction.raw         | Segmentation generated with the best 2D model on the crack volume.                                                                   |

## `.raw` with **python**
**There is no special dependency to use it this way (apart from basic stuff: numpy and matplotlib if you want to plot). **
51

## `.raw` with **Fiji (ImageJ)**

## `.h5` with **python**

**There is no special dependency to use it this way (apart from basic stuff: numpy and matplotlib if you want to plot). **

**You only need the `.zip`s and the module `read_raw.py` in this directory.**

Download and extract the contents of the `crack.zip`, `pa66.zip`, and `pa66_test.zip` files to this directory.

TODO add links


The `.info` files contain the shape (`x`, `y`, and `z` sizes) of the corresponding files with the same name so that you don't need to type them.

The module `read_raw.py` has a function that will be used to load the files' contents into `numpy.ndarray`s - credits to [`pymicro`](https://github.com/heprom/pymicro).

See the notebook `read_raw.ipynb` for a brief demo of how to open the `.raw`s as numpy arrays - put the contents of the `.zip` files in a folder `raws` before. 

## `SampleData` (`.h5` + `.xdmf`)

Download the files below and put them in this directory.

- [pa66_volumes.h5]()
- [pa66_volumes.xdmf]()

Install [`pymicro`](https://github.com/heprom/pymicro) and follow the tutorial in `read_h5.ipynb`.

To see how the `.h5`/`.xdmf` files were generated, see the file `write_h5.ipynb` or check [this tutorial in `pymicro`'s repository']().

# models

<a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Dataset" property="dct:title" rel="dct:type">Glass fiber-reinforced polyamide 66 3D X-ray computed tomography dataset for deep learning segmentation</span> by <span xmlns:cc="http://creativecommons.org/ns#" property="cc:attributionName"><a rel="author" href="https://orcid.org/0000-0002-9512-772X">Joao P C Bertoldo</a>, <a rel="author" href="https://orcid.org/0000-0002-1349-8042">Etienne Decencière</a>, <a rel="author" href="https://orcid.org/0000-0003-3268-4892">David Ryckelynck</a>, and <a rel="author" href="https://orcid.org/0000-0002-4075-5577">Henry Proudhon</a></span> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>.
